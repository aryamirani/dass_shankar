<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Typing Test</title>


    <link rel="stylesheet" href="../fonts.css">
    <link rel="stylesheet" href="../english/backbutton.css">
    <link rel="stylesheet" href="../math/instructions.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css">
    <script src="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/index.js"></script>

    <style>
        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: aquamarine;
            font-family: sans-serif;
        }

        h1 {
            position: fixed;
            top: 10px;
            font-size: 48px;
        }

        #word {
            font-size: 56px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        #typed {
            font-size: 40px;
            min-height: 50px;
            margin-bottom: 30px;
            background-color: #2ecc71;
        }

        .back_container {
            position: absolute;
            top: 20px;
            left: 20px;
        }

        #stage-container {
            position: relative;
            width: 1400px;
            height: 400px;
            background-color: #e0e8ea;
            border: 10px solid #8e44ad;
            border-radius: 40px;
            overflow: hidden;
            display: flex;
            flex-direction: row;
            box-shadow: 0 10px 30px rgba(193, 6, 6, 0.5);
        }

        .simple-keyboard {
            max-width: 1400px;
        }
    </style>
</head>

<body>

    <audio id="correct-sound" src="assets/correct.wav" preload="auto"></audio>
    <audio id="wrong-sound" src="assets/wrong.wav" preload="auto"></audio>

    <h1>Typing</h1>
    <div style="text-align: left;">
        <a href="../dashboard.html" class="card back_container" style="border-top-color: #2ecc71;">
            <span class="icon">↩️</span>
            <span class="subject-name">Back</span>
        </a>
    </div>

    <div class="tooltip card" style="font-size: 40px; z-index: 1000;">Instructions
        <div class="tooltiptext">
            <div class="card">
                Welcome to Typing. Type the words on the screen
            </div>
        </div>
    </div>

    <div style="text-align: left;">
        <button href=  class="card back_container" style="border-top-color: #2ecc71;">
    </div>
    <div id="word">HELLO</div>
    <div id="typed"></div>

    <div class="simple-keyboard"></div>

    <script>
        const correctSound = document.getElementById("correct-sound");
        const wrongSound = document.getElementById("wrong-sound");

        const wordbank = [
            "hello",
            "cat",
            "dog",
            "cap",
            "stick",
            "shoes",
            "shirt",
            "balloon"
        ]

        const target = wordbank[Math.floor(Math.random() * wordbank.length)];

        let typed = "";

        const wordDiv = document.getElementById("word");
        const typedDiv = document.getElementById("typed");

        wordDiv.textContent = target;


        const keyboard = new window.SimpleKeyboard.default({
            physicalKeyboardHighlight: true,
            physicalKeyboardHighlightPress: true,

            onKeyPress: button => {
                if (button === "{bksp}") {
                    typed = typed.slice(0, -1);
                } else if (button.length === 1) {
                    typed += button;
                }

                typedDiv.textContent = typed;

                if (typed === target) {
                    wordDiv.style.color = "green";
                    correctSound.play();

                } else if (target.startsWith(typed)) {
                    wordDiv.style.color = "orange";
                } else {
                    wordDiv.style.color = "red";
                }
            }
        });
    </script>

</body>

</html>
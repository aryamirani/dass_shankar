<!-- drag and drop style matching game  -->

<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Phonics</title>
    <link rel="stylesheet" href="feedback.css">
    <link rel="stylesheet" href="backbutton.css">
    <style>
        body {
            height: 100%;
            margin: 0;
        }

        body {
            /* background-image: url("assets/background.png"); */
            background-size: 150%;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
        }

        * {
            box-sizing: border-box;
            font-family: "Grandstander";
        }

        body {
            margin: 0;
            min-height: 100vh;
            background-color: rgb(91, 197, 197);
            padding: 24px;
        }

        h1 {
            text-align: center;
            font-size: 36px;
        }

        .game {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            max-width: 1400px;
            margin: 40px auto;
            /* margin-left: 400px; */
        }

        .left,
        .right {
            background: rgba(255, 255, 255, 0.3);
            padding: 24px;
            border-radius: 10px;
        }

        .row {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 20px;
        }

        .compound {
            flex: 1;
            background: white;
            padding: 16px;
            border-radius: 12px;
            font-size: 22px;
            text-align: center;
        }

        .drop-zone {
            width: 300px;
            min-height: 50px;
            border: 3px dashed #333;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 25px;
            background: rgba(255, 255, 255, 0.6);
        }

        .word {
            padding: 12px 20px;
            background: rgb(235, 242, 238);
            border-radius: 10px;
            font-size: 25px;
            margin: 10px 0;
            cursor: grab;
            text-align: center;
        }

        .correct {
            background: #22c55e !important;
            color: white;
            border: none;
        }

        .wrong {
            background: #ef4444 !important;
            color: white;
            border: none;
        }
    </style>
</head>

<body>


    <div style="text-align: left;">
        <a href="engboard.html" class="card" style="border-top-color: #2ecc71;">
            <span class="icon">↩️</span>
            <span class="subject-name">Back</span>
        </a>
    </div>
    <h1 style="font-size: 50px;">Drag the two correct words to form each compound word</h1>

    <div class="game">
        <div class="left" id="leftColumn"></div>
        <div class="right" id="wordBank"></div>
    </div>
    <div id="feedback" class="feedback hidden"></div>

    <script src="feedback.js"></script>
    <script>
        const wordTriples = [
            ["Airplane", "Air", "Plane"],
            ["Anything", "Any", "Thing"],
            ["Basketball", "Basket", "Ball"],
            ["Cupboard", "Cup", "Board"],
            ["Classmate", "Class", "Mate"],
            ["Doormat", "Door", "Mat"]
        ];

        const leftColumn = document.getElementById("leftColumn");
        const wordBank = document.getElementById("wordBank");

        const parts = wordTriples.flatMap(t => t.slice(1));

        wordTriples.forEach(([compound, p1, p2]) => {
            const row = document.createElement("div");
            row.className = "row";

            const word = document.createElement("div");
            word.className = "compound";
            word.textContent = compound;

            const drop = document.createElement("div");
            drop.className = "drop-zone";

            drop.innerHTML = `
                <div class="slot" data-index="0" style="font-size:23px;"> <p> part-1   |<\p></div>
                <div class="slot" data-index="1" style="font-size:23px;"><p>| part-2<\p></div>
                `;

            drop.dataset.correct = [p1, p2].sort().join(",");
            drop.dataset.dropped = "";

            drop.addEventListener("dragover", e => e.preventDefault());

            drop.addEventListener("drop", e => {
                e.preventDefault();
                if (drop.classList.contains("correct")) return;

                const w = e.dataTransfer.getData("text");
                let dropped = drop.dataset.dropped
                    ? drop.dataset.dropped.split(",")
                    : [];

                if (dropped.includes(w)) return;

                dropped.push(w);
                drop.dataset.dropped = dropped.join(",");
                drop.textContent = dropped.join(" + ");

                if (dropped.length === 2) {
                    check(drop, dropped);
                }
            });

            row.appendChild(word);
            row.appendChild(drop);
            leftColumn.appendChild(row);
        });

        function check(drop, dropped) {
            const a = dropped.sort().join(",");
            const b = drop.dataset.correct;

            if (a === b) {
                drop.classList.add("correct");
                drop.textContent = "Correct";

                // feed back logic
                showFeedback();

            } else {
                drop.classList.add("wrong");
                drop.textContent = "Wrong";
                setTimeout(() => reset(drop), 1000);
            }
        }

        function reset(drop) {
            drop.classList.remove("wrong");
            drop.dataset.dropped = "";
            drop.textContent = "Drop here";
        }

        // build word bank
        parts.sort(() => Math.random() - 0.5).forEach(word => {
            const div = document.createElement("div");
            div.className = "word";
            div.textContent = word;
            div.draggable = true;

            div.addEventListener("dragstart", e => {
                e.dataTransfer.setData("text", word);
            });

            wordBank.appendChild(div);
        });
    </script>

</body>

</html>
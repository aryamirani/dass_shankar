<!DOCTYPE html>
<html>

<head>
    <title>Fill the Glasses</title>
    <link rel="stylesheet" href="../../fonts.css">
    <link rel="stylesheet" href="../../english/backbutton.css">
    <link rel="stylesheet" href="../instructions.css">
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            font-family: 'Grandstander';
            background-image: url('../assets/background.png');
            background-size: cover;
            text-align: center;
            padding-top: 40px;
        }

        .target {
            font-size: 70px;
            margin-bottom: 30px;
        }

        .glass-area {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
        }

        .glass {
            font-size: 80px;
            cursor: pointer;
            transition: transform 0.1s;
        }

        .glass:hover {
            transform: scale(1.1);
        }

        .filled {
            filter: hue-rotate(180deg);
        }

        .message {
            font-size: 50px;
            margin-top: 30px;
        }

        button {
            font-size: 30px;
            padding: 10px 30px;
            border-radius: 20px;
            margin-top: 20px;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <audio id="correct-sound" src="../assets/correct.wav" preload="auto"></audio>
    <audio id="wrong-sound" src="../assets/wrong.wav" preload="auto"></audio>


    <h1 style="font-size:60px">Water Filling </h1>
    <div style="text-align: left;">
        <a href="countdash.html" class="card back_container" style="border-top-color: #2ecc71;">
            <span class="icon">↩️</span>
            <span class="subject-name">Back</span>
        </a>
    </div>
    <div style="text-align: center;">
        <div class="tooltip card center-card" style="font-size: 40px; z-index: 1000;">
            Instructions
            <div class="tooltiptext">
                <div class="card">
                    Welcome to Tap Filling. Your Objctive to fill the number of glasses displayed on screen
                </div>
            </div>
        </div>
    </div>
    <div id="target" class="target" style="padding-top: 40px;"></div>

    <div id="glassArea" class="glass-area"></div>

    <div id="message" class="message"></div>

    <button onclick="startGame()">Play Again</button>

    <script>
        let target = 0;
        let filled = 0;

        const correctSound = document.getElementById("correct-sound");
        const wrongSound = document.getElementById("wrong-sound");
        function startGame() {
            target = Math.floor(Math.random() * 4) + 2; // 2–5
            filled = 0;

            document.getElementById("message").textContent = "";
            renderTarget();
            renderGlasses();
        }

        function renderTarget() {
            let s = String(target);
            document.getElementById("target").textContent = "Fill " + target + " glasses";
        }

        function renderGlasses() {
            const area = document.getElementById("glassArea");
            area.innerHTML = "";

            for (let i = 0; i < 6; i++) {
                const g = document.createElement("span");
                const img = document.createElement("img");
                img.src = "../assets/water.png";
                img.style.width = "160px";
                img.style.height = "150px";

                g.appendChild(img);
                g.className = "glass";
                g.dataset.filled = "false";

                g.onclick = () => fillGlass(g);
                area.appendChild(g);
            }
        }

        function fillGlass(glass) {
            if (glass.dataset.filled === "true") return;

            glass.dataset.filled = "true";
            glass.classList.add("filled");
            filled++;

            if (filled === target) {
                correctSound.currentTime = 0;
                correctSound.play();
                document.getElementById("message").textContent = "Correct!";
            }
            if (filled > target) {
                wrongSound.currentTime = 0;
                wrongSound.play();
                document.getElementById("message").textContent = "Too many!";
            }
        }

        startGame();
    </script>

</body>

</html>